(function(b){b.fn.autogrow=function(){return this.each(function(){var h=this;b.fn.autogrow.resize(h);b(h).focus(function(){h.interval=setInterval(function(){b.fn.autogrow.resize(h)},500)}).blur(function(){clearInterval(h.interval)})})};b.fn.autogrow.resize=function(h){var l=parseInt(b(h).css("line-height"),10),r=h.value.split("\n"),n=h.cols,p=0;b.each(r,function(){p+=Math.ceil(this.length/n)||1});l*=p+1;b(h).css("height",l)}})(jQuery);
(function(b){function h(){b(document).on("click","a.comment-close",function(a){a.preventDefault();n(b(this).attr("id").substring(2))});b(document).on("click","a.vote",function(a){a.preventDefault();B(b(this))});b(document).on("click","a.reply",function(a){a.preventDefault();C(b(this).attr("id").substring(2))});b(document).on("click","a.close-reply",function(a){a.preventDefault();t(b(this).attr("id").substring(2))});b(document).on("click","a.sort-option",function(a){a.preventDefault();D(b(this))});
b(document).on("click","a.show-proposal",function(a){a.preventDefault();a=b(this).attr("id").substring(2);b("#sp"+a).hide();b("#hp"+a).show();b("#pr"+a).slideDown("fast")});b(document).on("click","a.hide-proposal",function(a){a.preventDefault();a=b(this).attr("id").substring(2);b("#hp"+a).hide();b("#sp"+a).show();b("#pr"+a).slideUp("fast")});b(document).on("click","a.show-propose-change",function(a){a.preventDefault();a=b(this).attr("id").substring(2);b("#pc"+a).hide();b("#hc"+a).show();a=b("#pt"+
a);a.val(a.data("source"));b.fn.autogrow.resize(a[0]);a.slideDown("fast")});b(document).on("click","a.hide-propose-change",function(a){a.preventDefault();y(b(this).attr("id").substring(2))});b(document).on("click","a.accept-comment",function(a){a.preventDefault();E(b(this).attr("id").substring(2))});b(document).on("click","a.delete-comment",function(a){a.preventDefault();F(b(this).attr("id").substring(2))});b(document).on("click","a.comment-markup",function(a){a.preventDefault();b("#mb"+b(this).attr("id").substring(2)).toggle()})}
function l(){if("asc"==k.substring(0,3)){var a=k.substring(3);q=function(b,d){return b[a]-d[a]}}else q=function(a,b){return b[k]-a[k]};b("a.sel").attr("href","#").removeClass("sel");b("a.by"+k).removeAttr("href").addClass("sel")}function r(a){b("#ao"+a).hide();b("#ah"+a).show();var c=b.extend({id:a},g);c=b(u(G,c)).hide();c.find('textarea[name="proposal"]').hide();c.find("a.by"+k).addClass("sel");var d=c.find("#cf"+a);d.submit(function(a){a.preventDefault();z(d)});b("#s"+a).after(c);c.slideDown("fast",
function(){p(a)})}function n(a){b("#ah"+a).hide();b("#ao"+a).show();var c=b("#sc"+a);c.slideUp("fast",function(){c.remove()})}function p(a){b.ajax({type:"GET",url:g.getCommentsURL,data:{node:a},success:function(c,d,e){d=b("#cl"+a);e=100;b("#cf"+a).find('textarea[name="proposal"]').data("source",c.source);if(0===c.comments.length)d.html("<li>No comments yet.</li>"),d.data("empty",!0);else{var f=v(c.comments);e=100*c.comments.length;w(f,d);d.data("empty",!1)}b("#cn"+a).slideUp(e+200);d.slideDown(e)},
error:function(a,b,e){m("Oops, there was a problem retrieving the comments.")},dataType:"json"})}function z(a){var c=a.find('input[name="node"]').val(),d=a.find('input[name="parent"]').val(),e=a.find('textarea[name="comment"]').val(),f=a.find('textarea[name="proposal"]').val();""==e?m("Please enter a comment."):(a.find("textarea,input").attr("disabled","disabled"),b.ajax({type:"POST",url:g.addCommentURL,dataType:"json",data:{node:c,parent:d,text:e,proposal:f},success:function(e,f,h){c&&y(c);a.find("textarea").val("").add(a.find("input")).removeAttr("disabled");
f=b("#cl"+(c||d));f.data("empty")&&(b(f).empty(),f.data("empty",!1));a:{e=e.comment;f=A(e);e.children=null;f.data("comment",e);h=b("#cl"+(e.node||e.parent));var k=x(h),l=b(document.createElement("li"));l.hide();for(var m=0;m<k.length;m++)if(0>=q(e,k[m])){b("#cd"+k[m].id).parent().before(l.html(f));l.slideDown("fast");break a}h.append(l.html(f));l.slideDown("fast")}b("#ao"+c).find("img").attr({src:g.commentBrightImage});c&&b("#ca"+c).slideUp()},error:function(b,c,d){a.find("textarea,input").removeAttr("disabled");
m("Oops, there was a problem adding the comment.")}}))}function w(a,c){b.each(a,function(){var a=A(this);c.append(b(document.createElement("li")).html(a));w(this.children,a.find("ul.comment-children"));this.children=null;a.data("comment",this)})}function E(a){b.ajax({type:"POST",url:g.acceptCommentURL,data:{id:a},success:function(c,d,e){b("#cm"+a).fadeOut("fast");b("#cd"+a).removeClass("moderate")},error:function(a,b,e){m("Oops, there was a problem accepting the comment.")}})}function F(a){b.ajax({type:"POST",
url:g.deleteCommentURL,data:{id:a},success:function(c,d,e){var f=b("#cd"+a);"delete"==c?f.slideUp("fast",function(){f.remove()}):(f.find("span.user-id:first").text("[deleted]").end().find("div.comment-text:first").text("[deleted]").end().find("#cm"+a+", #dc"+a+", #ac"+a+", #rc"+a+", #sp"+a+", #hp"+a+", #cr"+a+", #rl"+a).remove(),c=f.data("comment"),c.username="[deleted]",c.text="[deleted]",f.data("comment",c))},error:function(a,b,e){m("Oops, there was a problem deleting the comment.")}})}function y(a){b("#hc"+
a).hide();b("#pc"+a).show();a=b("#pt"+a);a.val("").removeAttr("disabled");a.slideUp("fast")}function D(a){a=a.attr("class").split(/\s+/);for(var c=0;c<a.length;c++)"sort-option"!=a[c]&&(k=a[c].substring(2));l();a=new Date;a.setDate(a.getDate()+365);document.cookie="sortBy="+escape(k)+";expires="+a.toUTCString();b("ul.comment-ul").each(function(a,c){var d=x(b(c),!0);d=v(d);w(d,b(c).empty())})}function B(a){if(g.voting){var c=a.attr("id");if(c){var d=0;"u"!=c.charAt(1)&&(d="u"==c.charAt(0)?1:-1);d=
{comment_id:c.substring(2),value:d};a.hide();b("#"+c.charAt(0)+("u"==c.charAt(1)?"v":"u")+d.comment_id).show();a=b("div#cd"+d.comment_id);c=a.data("comment");0!==d.value&&c.vote===-1*d.value&&(b("#"+(1==d.value?"d":"u")+"u"+d.comment_id).hide(),b("#"+(1==d.value?"d":"u")+"v"+d.comment_id).show());c.rating+=0===c.vote?d.value:d.value-c.vote;c.vote=d.value;a.data("comment",c);a.find(".rating:first").text(c.rating+" point"+(1==c.rating?"":"s"));b.ajax({type:"POST",url:g.processVoteURL,data:d,error:function(a,
b,c){m("Oops, there was a problem casting that vote.")}})}}else m("You'll need to login to vote.")}function C(a){b("#rl"+a).hide();b("#cr"+a).show();var c=b(u(H,{id:a})).hide();b("#cl"+a).prepend(c).find("#rf"+a).submit(function(c){c.preventDefault();z(b("#rf"+a));t(a)}).find("input[type=button]").click(function(){t(a)});c.slideDown("fast",function(){b("#rf"+a).find("textarea").focus()})}function t(a){b("#rd"+a).slideUp("fast",function(){b(this).remove()});b("#cr"+a).hide();b("#rl"+a).show()}function v(a){a.sort(q);
b.each(a,function(){this.children=v(this.children)});return a}function x(a,c){var d=[];a.children().children("[id^='cd']").each(function(){var a=b(this).data("comment");c&&(a.children=x(b(this).find("#cl"+a.id),!0));d.push(a)});return d}function A(a){if(!a.displayed&&!g.moderator)return b('<div class="moderate">Thank you!  Your comment will show up once it is has been approved by a moderator.</div>');a.pretty_rating=a.rating+" point"+(1==a.rating?"":"s");a.css_class=a.displayed?"":" moderate";var c=
b.extend({},g,a);c=b(u(I,c));if(a.vote){var d=1==a.vote?"u":"d";c.find("#"+d+"v"+a.id).hide();c.find("#"+d+"u"+a.id).show()}if(g.moderator||"[deleted]"!=a.text)c.find("a.reply").show(),a.proposal_diff&&c.find("#sp"+a.id).show(),g.moderator&&!a.displayed&&c.find("#cm"+a.id).show(),(g.moderator||g.username==a.username)&&c.find("#dc"+a.id).show();return c}function u(a,c){function d(a,d){var f=c;b.each(a.split("."),function(){f=f[this]});return d?e.text(f||"").html():f}var e=b(document.createElement("div"));
return a.replace(/<([%#])([\w\.]*)\1>/g,function(a,b,c){return d(c,"%"==b?!0:!1)})}function m(a){b(document.createElement("div")).attr({"class":"popup-error"}).append(b(document.createElement("div")).attr({"class":"error-message"}).text(a)).appendTo("body").fadeIn("slow").delay(2E3).fadeOut("slow")}var q,k;b.fn.comment=function(){return this.each(function(){var a=b(this).attr("id").substring(1),c=COMMENT_METADATA[a],d=c+" comment"+(1==c?"":"s"),e=0<c?g.commentBrightImage:g.commentImage;c=0==c?" nocomment":
"";b(this).append(b(document.createElement("a")).attr({href:"#","class":"sphinx-comment-open"+c,id:"ao"+a}).append(b(document.createElement("img")).attr({src:e,alt:"comment",title:d})).click(function(a){a.preventDefault();r(b(this).attr("id").substring(2))})).append(b(document.createElement("a")).attr({href:"#","class":"sphinx-comment-close hidden",id:"ah"+a}).append(b(document.createElement("img")).attr({src:g.closeCommentImage,alt:"close",title:"close"})).click(function(a){a.preventDefault();n(b(this).attr("id").substring(2))}))})};
var g={processVoteURL:"/_process_vote",addCommentURL:"/_add_comment",getCommentsURL:"/_get_comments",acceptCommentURL:"/_accept_comment",deleteCommentURL:"/_delete_comment",commentImage:"/static/_static/comment.png",closeCommentImage:"/static/_static/comment-close.png",loadingImage:"/static/_static/ajax-loader.gif",commentBrightImage:"/static/_static/comment-bright.png",upArrow:"/static/_static/up.png",downArrow:"/static/_static/down.png",upArrowPressed:"/static/_static/up-pressed.png",downArrowPressed:"/static/_static/down-pressed.png",
voting:!1,moderator:!1};"undefined"!=typeof COMMENT_OPTIONS&&(g=jQuery.extend(g,COMMENT_OPTIONS));var G='    <div class="sphinx-comments" id="sc<%id%>">      <p class="sort-options">        Sort by:        <a href="#" class="sort-option byrating">best rated</a>        <a href="#" class="sort-option byascage">newest</a>        <a href="#" class="sort-option byage">oldest</a>      </p>      <div class="comment-header">Comments</div>      <div class="comment-loading" id="cn<%id%>">        loading comments... <img src="<%loadingImage%>" alt="" /></div>      <ul id="cl<%id%>" class="comment-ul"></ul>      <div id="ca<%id%>">      <p class="add-a-comment">Add a comment        (<a href="#" class="comment-markup" id="ab<%id%>">markup</a>):</p>      <div class="comment-markup-box" id="mb<%id%>">        reStructured text markup: <i>*emph*</i>, <b>**strong**</b>,         <code>``code``</code>,         code blocks: <code>::</code> and an indented block after blank line</div>      <form method="post" id="cf<%id%>" class="comment-form" action="">        <textarea name="comment" cols="80"></textarea>        <p class="propose-button">          <a href="#" id="pc<%id%>" class="show-propose-change">            Propose a change &#9657;          </a>          <a href="#" id="hc<%id%>" class="hide-propose-change">            Propose a change &#9663;          </a>        </p>        <textarea name="proposal" id="pt<%id%>" cols="80"                  spellcheck="false"></textarea>        <input type="submit" value="Add comment" />        <input type="hidden" name="node" value="<%id%>" />        <input type="hidden" name="parent" value="" />      </form>      </div>    </div>',
I='    <div id="cd<%id%>" class="sphinx-comment<%css_class%>">      <div class="vote">        <div class="arrow">          <a href="#" id="uv<%id%>" class="vote" title="vote up">            <img src="<%upArrow%>" />          </a>          <a href="#" id="uu<%id%>" class="un vote" title="vote up">            <img src="<%upArrowPressed%>" />          </a>        </div>        <div class="arrow">          <a href="#" id="dv<%id%>" class="vote" title="vote down">            <img src="<%downArrow%>" id="da<%id%>" />          </a>          <a href="#" id="du<%id%>" class="un vote" title="vote down">            <img src="<%downArrowPressed%>" />          </a>        </div>      </div>      <div class="comment-content">        <p class="tagline comment">          <span class="user-id"><%username%></span>          <span class="rating"><%pretty_rating%></span>          <span class="delta"><%time.delta%></span>        </p>        <div class="comment-text comment"><#text#></div>        <p class="comment-opts comment">          <a href="#" class="reply hidden" id="rl<%id%>">reply &#9657;</a>          <a href="#" class="close-reply" id="cr<%id%>">reply &#9663;</a>          <a href="#" id="sp<%id%>" class="show-proposal">proposal &#9657;</a>          <a href="#" id="hp<%id%>" class="hide-proposal">proposal &#9663;</a>          <a href="#" id="dc<%id%>" class="delete-comment hidden">delete</a>          <span id="cm<%id%>" class="moderation hidden">            <a href="#" id="ac<%id%>" class="accept-comment">accept</a>          </span>        </p>        <pre class="proposal" id="pr<%id%>"><#proposal_diff#>        </pre>          <ul class="comment-children" id="cl<%id%>"></ul>        </div>        <div class="clearleft"></div>      </div>    </div>',
H='    <li>      <div class="reply-div" id="rd<%id%>">        <form id="rf<%id%>">          <textarea name="comment" cols="80"></textarea>          <input type="submit" value="Add reply" />          <input type="button" value="Cancel" />          <input type="hidden" name="parent" value="<%id%>" />          <input type="hidden" name="node" value="" />        </form>      </div>    </li>';b(document).ready(function(){h();k="rating";if(0<document.cookie.length){var a=document.cookie.indexOf("sortBy=");
if(-1!=a){a+=7;var b=document.cookie.indexOf(";",a);-1==b&&(b=document.cookie.length,k=unescape(document.cookie.substring(a,b)))}}l()})})(jQuery);
$(document).ready(function(){$(".sphinx-has-comment").comment();$("div.context").each(function(){var b=$.getQueryParameters();b=b.q?b.q[0].split(/\s+/):[];var l=$(this);$.each(b,function(){l.highlightText(this.toLowerCase(),"highlighted")})});var b=document.location.hash;"#comment-"==b.substring(0,9)&&($("#ao"+b.substring(9)).click(),document.location.hash="#s"+b.substring(9))});
